(()=>{"use strict";const e=e=>{const t=e.closest("form");t&&HTMLFormElement.prototype.submit.call(t)};!function(t){t(".widgetizer-field-type-sortable").each((function(e,i){const n=t(this);n.sortableContainer=n.find("ul.sortable").first(),n.updateValue=()=>{const e=n.sortableContainer.find('input[type="hidden"]'),i=[];n.sortableContainer.find("li").each((function(){t(this).is(".invisible")||i.push(t(this).data("value"))})),e.val(i.join(","))},n.sortableContainer.sortable({stop(){n.updateValue()}}).disableSelection().find("li").each((function(){t(this).find("i.visibility").on("click",(function(){t(this).toggleClass("dashicons-visibility-faint").parents("li:eq(0)").toggleClass("invisible")}))})).on("click",(function(){n.updateValue()}))}));const i=document.querySelectorAll(".widgetizer-field-refs a");i&&i.forEach((t=>{t.addEventListener("click",(function(i){i.preventDefault();const n=t.closest(".widgetizer-field"),s=t.closest(".widgetizer-field-refs"),l=JSON.parse(s.getAttribute("data-ref"));if(n){const i=n.querySelector('input[type="number"]');if(i){const s=t.getAttribute("data-val");i.value=s,!0===l.submitter&&e(n)}}}))}));const n=document.querySelectorAll(".widgetizer-field-mode-submitter");if(n){const t=["buttonset","radio"];n.forEach((i=>{const n=(e=>{const t=e.classList,i=Array.from(t).find((e=>e.startsWith("widgetizer-field-type-")));return i?i.replace("widgetizer-field-type-",""):null})(i);if(t.includes(n)){i.querySelectorAll("input").forEach((t=>{t.addEventListener("click",(function(i){e(t)}))}))}else"select"===n&&i.addEventListener("change",(function(){e(i)}))}))}}(jQuery)})();