(()=>{"use strict";!function(e){e(".widgetizer-field-type-sortable").each((function(t,i){const n=e(this);n.sortableContainer=n.find("ul.sortable").first(),n.updateValue=()=>{const t=n.sortableContainer.find('input[type="hidden"]'),i=[];n.sortableContainer.find("li").each((function(){e(this).is(".invisible")||i.push(e(this).data("value"))})),t.val(i.join(","))},n.sortableContainer.sortable({stop(){n.updateValue()}}).disableSelection().find("li").each((function(){e(this).find("i.visibility").on("click",(function(){e(this).toggleClass("dashicons-visibility-faint").parents("li:eq(0)").toggleClass("invisible")}))})).on("click",(function(){n.updateValue()}))}));const t=document.querySelectorAll(".widgetizer-field-refs a");t&&t.forEach((e=>{e.addEventListener("click",(function(t){t.preventDefault();const i=e.closest(".widgetizer-field"),n=e.closest(".widgetizer-field-refs"),s=JSON.parse(n.getAttribute("data-ref"));if(i){const t=i.querySelector('input[type="number"]');if(t){const n=e.getAttribute("data-val");if(t.value=n,!0===s.submitter){const e=i.closest("form");e&&HTMLFormElement.prototype.submit.call(e)}}}}))}));const i=document.querySelectorAll(".widgetizer-field-mode-submitter");if(i){const e=["buttonset","radio"];i.forEach((t=>{const i=(e=>{const t=e.classList,i=Array.from(t).find((e=>e.startsWith("widgetizer-field-type-")));return i?i.replace("widgetizer-field-type-",""):null})(t);if(e.includes(i)){t.querySelectorAll("input").forEach((e=>{e.addEventListener("click",(function(t){const i=e.closest("form");i&&HTMLFormElement.prototype.submit.call(i)}))}))}else"select"===i&&t.addEventListener("change",(function(){const e=t.closest("form");e&&HTMLFormElement.prototype.submit.call(e)}))}))}}(jQuery)})();